<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrador</title>
    <link th:href="@{/admin.css}" rel="stylesheet">
    <link rel="stylesheet" href="/src/main/resources/static/index.css">
</head>
<body>
<header>
    <!-- SVG Logo en lugar del texto "Plataforma de Gestión de Proyectos" -->
    <div class="logo-container">
        <img th:src="@{/images/logo.svg}" alt="Logo" class="logo">
    </div>
    <a class="login-button" th:href="@{/logout}">Cerrar Sesión</a>
</header>

<p class='hey' th:text="'Hola, ' + ${nombreUsuario} + '! ¿Listo para gestionar tus proyectos?'">¡Hola! ¿Qué tal estás?</p>

<main class="admin-panel">
    <div class="flex-container">
        <section class="create-project">
            <h2>Crear un nuevo proyecto</h2>
            <a th:href="@{/create}"><button id="createProjectBtn">Crear Proyecto</button></a>
        </section>

        <section class="project-list">
            <h2>Proyectos</h2>
            <ul>
                <!-- Itera sobre los proyectos disponibles -->
                <li th:each="proyecto : ${proyectos}"
                    th:data-project-id="${proyecto.id}"
                    th:text="${proyecto.nombre}"
                    class="project-item">
                    <!-- El nombre del proyecto se muestra y el ID se guarda en data-project-id -->
                </li>
            </ul>
        </section>
    </div>
    <section id="projectDetails" class="project-details hidden">
        <h2>Proyecto <span id="projectTitle">Nombre del proyecto</span></h2>

        <button id="addClientBtn">Añadir Cliente</button>
        <button id="addTaskBtn">Añadir Tarea</button>
        <button id="addBudgetBtn">Añadir Presupuesto</button>

        <button id="viewTasksBtn">Ver Tareas</button>
        <button id="viewRatingsBtn">Ver Valoraciones</button>
        <button id="viewResultBtn">Ver Cálculo del Resultado</button>

        <div id="clientList" class="hidden">
            <h3>Seleccionar Cliente</h3>
            <ul>
                <li>Cliente 1</li>
                <li>Cliente 2</li>
                <li>Cliente 3</li>
            </ul>
        </div>

        <div id="taskForm" class="hidden">
            <h3>Añadir Tarea</h3>
            <form>
                <label for="taskName">Nombre de la tarea:</label>
                <input type="text" id="taskName">
                <label for="taskEffort">Esfuerzo:</label>
                <input type="number" id="taskEffort">
                <button type="submit">Añadir Tarea</button>
            </form>
        </div>

        <form th:action="@{/admin/updateBudget}" method="post" id="budgetForm" class="hidden">
            <label for="projectBudget">Nuevo Presupuesto:</label>
            <input type="number" name="pesoMaximoTareas" id="projectBudget" required>

            <!-- Campo oculto para enviar el ID del proyecto seleccionado -->
            <input type="hidden" name="idProyecto" id="selectedProjectId" th:value="${selectedProjectId}">

            <button type="submit">Actualizar Presupuesto</button>
        </form>

        <div id="taskList" class="hidden">
            <h3>Tareas y Clientes</h3>
            <ul>
                <li>Tarea 1 - Cliente 1</li>
                <li>Tarea 2 - Cliente 2</li>
                <li>Tarea 3 - Cliente 3</li>
            </ul>
        </div>

        <div id="ratingList" class="hidden">
            <h3>Valoraciones de Clientes</h3>
            <ul>
                <li>Cliente 1 - No ha valorado</li>
                <li>Cliente 2 - Ha valorado</li>
                <li>Cliente 3 - No ha valorado</li>
            </ul>
        </div>



        <div id="resultCalculation" class="hidden">
            <h3>Cálculo del Resultado (Importancia y Valoración)</h3>
            <ul>
                <li>Tarea 1 - 70% Importancia - Valoración Cliente: 4/5</li>
                <li>Tarea 2 - 50% Importancia - Valoración Cliente: 3/5</li>
                <li>Tarea 3 - 30% Importancia - Valoración Cliente: 5/5</li>
            </ul>
        </div>
    </section>
</main>

<script th:src="@{/admin.js}"></script>
<script src="/src/main/resources/static/admin.js"></script>
</body>
</html>
